(function(t){function e(e){for(var r,s,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1151:function(t,e,n){"use strict";n("4453")},1771:function(t,e,n){var r={"./5bb81409-5932-4937-93a9-9f6ac68c1033.jpg":"235c","./default-avatar.jpg":"9e4c","./default-cover.png":"f0cd","./notification.ogg":"1f8b"};function o(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=a,t.exports=o,o.id="1771"},"1c86":function(t,e,n){"use strict";n("bf2b")},"1f8b":function(t,e,n){t.exports=n.p+"media/notification.972216db.ogg"},"235c":function(t,e,n){t.exports=n.p+"img/5bb81409-5932-4937-93a9-9f6ac68c1033.afabe4e0.jpg"},"38be":function(t,e,n){"use strict";n("6ee9")},3958:function(t,e,n){"use strict";n("c54b")},"3bfe":function(t,e,n){"use strict";n("daca")},"3feb":function(t,e,n){"use strict";n("ee93")},4453:function(t,e,n){},"56d0":function(t,e,n){"use strict";n("a88f")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",id:"navbar"}},[n("b-navbar-brand",{attrs:{href:"/home"}},[n("b-icon",{attrs:{icon:"twitter"}})],1),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-form",[n("b-button",{staticClass:"w-10 ml-4 search-btn",attrs:{size:"sm",type:"submit"}},[n("b-icon",{attrs:{icon:"search"}})],1),n("b-form-input",{staticClass:"w-90 search-input",attrs:{size:"sm",placeholder:"Search"}})],1)],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("em",[t._v("Messages")])]},proxy:!0}])},[n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Profile")]),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Sign Out")])],1)],1)],1)],1),n("router-view",{attrs:{id:"content"}}),t.chatBoxes.length>0?n("div",t._l(t.chatBoxes,(function(e){return n("chat",{key:e.chatId,attrs:{jwtToken:t.jwtToken,myId:e.myId,chatId:e.chatId},on:{closeChat:t.closeChat}})})),1):t._e(),n("notification-alert",{attrs:{notification:t.notification,jwtToken:t.jwtToken,dismissNotification:t.dismissNotification}})],1)},a=[],s=n("1da1"),i=(n("96cf"),n("b0c0"),n("a434"),n("7db0"),n("d3b7"),n("caad"),n("2532"),{name:"app",data:function(){return{jwtToken:null,myId:null,notification:null,dismissNotification:!1,audio:new Audio(n("1f8b")),chatBoxes:[]}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===t.$route.name&&t.$router.push({name:"home"}),e.next=3,t.$bus.$on("getCreds",(function(e){t.jwtToken=e.jwtToken,t.myId=e.myId,t.$http.defaults.headers.common["Authorization"]=t.jwtToken}));case 3:return e.next=5,t.$notificationHub.online(t.myId);case 5:return e.next=7,t.$notificationHub.$on("notify",t.notify);case 7:return e.next=9,t.$bus.$on("startChat",(function(e){var n=e.myId,r=e.chatId;t.createChatBox(n,r)}));case 9:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.$notificationHub.$off("notify",this.notify)},methods:{createChatBox:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return 1===n.chatBoxes.length&&n.chatBoxes.splice(0),r.next=3,n.chatBoxes.push({myId:t,chatId:e});case 3:case"end":return r.stop()}}),r)})))()},closeChat:function(t){var e=this.chatBoxes.find((function(e){return e.ToId===t}));this.chatBoxes.splice(this.chatBoxes.indexOf(e),1)},notify:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.notification=null,console.log(t),e.audio.play(),t.verb.includes("message")?e.createChatBox(e.myId,t.toId):e.$nextTick((function(){e.notification=t,e.dismissNotification=1e3}));case 4:case"end":return n.stop()}}),n)})))()}}}),c=i,u=(n("034f"),n("2877")),l=Object(u["a"])(c,o,a,!1,null,null,null),d=l.exports,m=n("bc3a"),f=n.n(m),p=n("bad4"),h=n("33e1"),g={install:function(){var t=(new p["a"]).withUrl("https://localhost:6868/postsocket").configureLogging(h["a"].Information).build(),e=new r["default"];r["default"].prototype.$postHub=e,t.on("Reaction",(function(t,n,r){e.$emit("post-react",{postId:t,userId:n,like:r})})),t.on("Comment",(function(t){e.$emit("post-commented-on",t)})),t.on("Edit",(function(t){e.$emit("comment-edited",t)})),t.on("Delete",(function(t){e.$emit("comment-deleted",t)})),e.postOpened=function(e){return n.then((function(){return t.invoke("ViewingPost",e)})).catch(console.error)},e.postClosed=function(e){return n.then((function(){return t.invoke("LeavingPost",e)})).catch(console.error)};var n=null;function o(){return n=t.start().catch((function(t){return console.error("Failed to connect with hub",t),new Promise((function(t,e){return setTimeout((function(){return o().then(t).catch(e)}),5e3)}))})),n}t.onclose((function(){return o()})),o()}},v={install:function(){var t=(new p["a"]).withUrl("https://localhost:6868/commentsocket").configureLogging(h["a"].Information).build(),e=new r["default"];r["default"].prototype.$commentHub=e,t.on("Reaction",(function(t,n,r){e.$emit("comment-react",{commentId:t,userId:n,like:r})})),t.on("Comment",(function(t){e.$emit("comment-commented-on",t)})),e.commentOpened=function(e){return n.then((function(){return t.invoke("ViewingComment",e)})).catch(console.error)},e.commentClosed=function(e){return n.then((function(){return t.invoke("LeavingComment",e)})).catch(console.error)};var n=null;function o(){return n=t.start().catch((function(t){return console.error("Failed to connect with hub",t),new Promise((function(t,e){return setTimeout((function(){return o().then(t).catch(e)}),5e3)}))})),n}t.onclose((function(){return o()})),o()}},b={install:function(){var t=(new p["a"]).withUrl("https://localhost:6868/chatsocket").configureLogging(h["a"].Information).build(),e=new r["default"];r["default"].prototype.$chatHub=e,t.on("Send",(function(t){e.$emit("message-received",t)})),t.on("Delete",(function(t){e.$emit("message-deleted",t)})),e.chatOpened=function(e){return n.then((function(){return t.invoke("ViewingChat",e)})).catch(console.error)},e.chatClosed=function(e){return n.then((function(){return t.invoke("LeavingChat",e)})).catch(console.error)};var n=null;function o(){return n=t.start().catch((function(t){return console.error("Failed to connect with hub",t),new Promise((function(t,e){return setTimeout((function(){return o().then(t).catch(e)}),5e3)}))})),n}t.onclose((function(){return o()})),o()}},w={install:function(){var t=(new p["a"]).withUrl("https://localhost:6868/notificationsocket").configureLogging(h["a"].Information).build(),e=new r["default"];r["default"].prototype.$notificationHub=e,t.on("Notify",(function(t){e.$emit("notify",t)})),e.online=function(e){return n.then((function(){return t.invoke("Online",e)})).catch(console.error)};var n=null;function o(){return n=t.start().catch((function(t){return console.error("Failed to connect with hub",t),new Promise((function(t,e){return setTimeout((function(){return o().then(t).catch(e)}),5e3)}))})),n}t.onclose((function(){return o()})),o()}},I=n("8c4f"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Login")]),t.show?n("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}})],1),n("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.Password,callback:function(e){t.$set(t.form,"Password",e)},expression:"form.Password"}})],1),n("b-form-group",{attrs:{id:"input-group-4"}},[n("b-form-checkbox",{model:{value:t.saveCred,callback:function(e){t.saveCred=e},expression:"saveCred"}},[t._v("Remember me")])],1),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e(),n("b-button",{attrs:{variant:"warning"},on:{click:t.onRegister}},[t._v("Register")])],1)},x=[],y=(n("e9c4"),{data:function(){return{authUrl:"https://localhost:6868/Users/authenticate",form:{},saveCred:!1,show:!0}},methods:{saveCookie:function(t,e,n){this.$cookies.set("sn-auth-token",t,n),this.$cookies.set("sn-user-id",e,n)},onSubmit:function(t){var e=this;t.preventDefault(),f.a.post(this.authUrl,JSON.parse(JSON.stringify(this.form))).then((function(t){var n=t.data.JwtToken,r=t.data.Id;e.saveCred?e.saveCookie(n,r,-1):e.saveCookie(n,r,0),e.$nextTick((function(){this.$router.push({name:"home",params:{authToken:n,myId:r}})}))})).catch((function(t){console.log(t)}))},onReset:function(t){var e=this;t.preventDefault(),this.form={},this.show=!1,this.$nextTick((function(){e.show=!0}))},onRegister:function(){this.$router.push({name:"register"})}}}),C=y,_=Object(u["a"])(C,k,x,!1,null,"296b3652",null),$=_.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Register")]),t.show?n("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[n("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1",description:"We'll never share your email with anyone else."}},[n("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}})],1),n("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",placeholder:"Enter password",required:""},model:{value:t.form.Password,callback:function(e){t.$set(t.form,"Password",e)},expression:"form.Password"}})],1),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e(),n("b-card",{staticClass:"mt-3",attrs:{header:"Form Data Result"}},[n("pre",{staticClass:"m-0"},[t._v(t._s(t.form))])])],1)},R=[],U={name:"Register",data:function(){return{registerUrl:"https://localhost:6868/Users/register",form:{},show:!0}},methods:{onSubmit:function(t){var e=this;t.preventDefault(),f.a.post(this.registerUrl,JSON.parse(JSON.stringify(this.form))).then((function(t){e.$router.push({name:"login"})})).catch((function(t){console.log(t.response)}))},onReset:function(t){var e=this;t.preventDefault(),this.form={},this.show=!1,this.$nextTick((function(){e.show=!0}))}}},O=U,T=Object(u["a"])(O,j,R,!1,null,"5532ba99",null),P=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:""}},[n("b-row",{attrs:{cols:"3"}},[n("b-col",{attrs:{cols:"3"}},[t._v("Column")]),n("b-col",{attrs:{cols:"6"}},[t.myId?n("feed",{attrs:{userId:t.myId,myId:t.myId,jwtToken:t.jwtToken,feedType:"feed"}}):t._e()],1),n("b-col",{attrs:{cols:"3"}},[t._v("Column")])],1)],1)},M=[],S=(n("ac1f"),n("5319"),{name:"Home",data:function(){return{getUserUrl:"https://localhost:6868/Users/userId",getUserProfileUrl:"https://localhost:6868/Users/userId/profile",jwtToken:"",myId:""}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.jwtToken=t.$route.params.authToken,void 0===t.jwtToken&&(t.jwtToken=t.$cookies.get("sn-auth-token"),null===t.jwtToken&&t.$router.push("login")),t.$http.defaults.headers.common["Authorization"]=t.jwtToken,t.myId=t.$cookies.get("sn-user-id"),e.next=6,t.$bus.$emit("getCreds",{jwtToken:t.jwtToken,myId:t.myId});case 6:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUser();case 2:return e.next=4,t.getUserProfile();case 4:case"end":return e.stop()}}),e)})))()},methods:{logout:function(){this.jwtToken=this.$cookies.get("sn-auth-token"),null!==this.jwtToken&&this.$cookies.remove("sn-auth-token"),this.$nextTick((function(){this.$router.push("login")}))},getUser:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===t.myId){e.next=3;break}return e.next=3,t.$http.get(t.getUserUrl.replace("userId",t.myId)).then((function(e){t.user=e.data})).catch((function(t){console.log(t.response)}));case 3:case"end":return e.stop()}}),e)})))()},getUserProfile:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,e.next=3,t.$http.get(t.getUserProfileUrl.replace("userId",t.myId)).then((function(e){console.log(e.data),e.data.Timestamp||t.$router.push({name:"updateprofile",params:{userProfile:e.data,myId:n.myId,jwtToken:n.jwtToken}})})).catch((function(t){console.log(t.response)}));case 3:case"end":return e.stop()}}),e)})))()}}}),A=S,L=Object(u["a"])(A,E,M,!1,null,"846ac812",null),N=L.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user-profile"}},[t.userId&&t.myId?n("user-card",{attrs:{jwtToken:t.jwtToken,myId:t.myId,userId:t.userId,size:t.userCardSize}}):t._e(),n("b-card",{staticClass:"border-0",attrs:{"no-body":""}},[n("b-tabs",{attrs:{card:"","active-nav-item-class":"text-light bg-dark border-0 rounded-0","active-tab-class":"bg-dark border-0 rounded-0","nav-wrapper-class":"bg-dark py-0 border-0 rounded-0","nav-class":"bg-dark border-0",align:"center",justified:""}},[n("b-tab",{attrs:{title:"Personal information"}},[n("personal-information",{attrs:{userId:t.userId}})],1),n("b-tab",{attrs:{title:"Posts",active:""}},[t.userId?n("feed",{attrs:{userId:t.userId,myId:t.myId,jwtToken:t.jwtToken,feedType:"posts"}}):t._e()],1),n("b-tab",{attrs:{title:"Media"}},[n("b-card-text",[t._v("Tab contents 2")])],1),n("b-tab",{attrs:{title:"Follow"}},[t.userId?n("follow-list",{attrs:{myId:t.myId,userId:t.userId,jwtToken:t.jwtToken}}):t._e()],1)],1)],1)],1)},D=[],z={name:"UserProfile",data:function(){return{jwtToken:"",myId:null,userId:null,userCardSize:"L"}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.myId=t.$route.params.myId,void 0!==t.myId&&null!==t.myId||(t.myId=t.$cookies.get("sn-user-id")),t.userId=t.$route.params.userId,void 0!==t.userId&&null!==t.userId||t.$router.go(-1),t.jwtToken=t.$route.params.jwtToken,void 0===t.jwtToken&&(t.jwtToken=t.$cookies.get("sn-auth-token")),t.$http.defaults.headers.common["Authorization"]=t.jwtToken,e.next=9,t.$bus.$emit("getCreds",{jwtToken:t.jwtToken,myId:t.myId});case 9:case"end":return e.stop()}}),e)})))()}},H=z,B=(n("d95f"),Object(u["a"])(H,F,D,!1,null,"06cea0b8",null)),J=B.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Update profile")]),t.show?n("b-form",{on:{submit:t.onSubmit}},[n("b-form-group",[n("b-form-input",{attrs:{id:"input-name",placeholder:"Name",required:""},model:{value:t.form.Name,callback:function(e){t.$set(t.form,"Name",e)},expression:"form.Name"}})],1),n("b-form-group",[n("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"input-dob"},model:{value:t.form.DateOfBirth,callback:function(e){t.$set(t.form,"DateOfBirth",e)},expression:"form.DateOfBirth"}})],1),n("b-form-group",[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"About yourself...",rows:"3","max-rows":"6"},model:{value:t.form.SelfIntroduction,callback:function(e){t.$set(t.form,"SelfIntroduction",e)},expression:"form.SelfIntroduction"}})],1),n("b-form-group",[n("b-form-radio-group",{staticClass:"mb-3",attrs:{options:t.options,"value-field":"value","text-field":"name"},model:{value:t.form.Gender,callback:function(e){t.$set(t.form,"Gender",e)},expression:"form.Gender"}})],1),n("b-form-group",[n("b-form-input",{attrs:{id:"input-location",placeholder:"Address"},model:{value:t.form.CurrentLocation,callback:function(e){t.$set(t.form,"CurrentLocation",e)},expression:"form.CurrentLocation"}})],1),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1):t._e(),n("b-card",{staticClass:"mt-3",attrs:{header:"Form Data Result"}},[n("pre",{staticClass:"m-0"},[t._v(t._s(t.form))])])],1)},q=[],W=(n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),{data:function(){return{profileUrl:"https://localhost:6868/Users/userId/profile",show:!0,form:{},options:[{value:0,name:"Male"},{value:1,name:"Female"},{value:null,name:"Prefer not to share"}],avatarUrl:""}},created:function(){this.originalform=this.$route.params.userProfile,this.form=this.$route.params.userProfile},methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.form.Timestamp=new Date,f.a.patch(this.profileUrl.replace("userId",this.$route.params.myId),JSON.parse(JSON.stringify(this.form)),{headers:{Authorization:"Bearer ".concat(this.$route.params.jwtToken)}}).then((function(t){console.log(t),e.$router.push({name:"home",params:{jwtToken:e.$route.params.jwtToken,myId:e.$route.params.myId}})})).catch((function(t){console.log(t.response)}))},onFileChange:function(t){var e=t.target.files[0];this.avatarUrl=URL.createObjectURL(e)}}}),V=W,Z=(n("c493"),Object(u["a"])(V,G,q,!1,null,"1c6e8ce8",null)),K=Z.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Post")]),n("post-card",{attrs:{myId:t.myId,jwtToken:t.jwtToken,postId:t.postId}}),n("b-container",{attrs:{fluid:"",id:"comments"}},[n("h2",[t._v("Comments")]),n("comment-form",{attrs:{myId:t.myId,jwtToken:t.jwtToken,postId:t.postId}}),t._l(t.commentIds,(function(e){return n("comment-card",{key:e,attrs:{myId:t.myId,jwtToken:t.jwtToken,commentId:e}})}))],2)],1)},Q=[],X={name:"PostLayout",data:function(){return{myId:"",jwtToken:"",postId:"",getCommentsForPostUrl:"https://localhost:6868/Posts/postId/comments",commentIds:[]}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.myId=t.$route.params.myId,void 0===t.myId&&(t.myId=t.$cookies.get("sn-user-id")),t.jwtToken=t.$route.params.jwtToken,void 0===t.jwtToken&&(t.jwtToken=t.$cookies.get("sn-auth-token")),t.$http.defaults.headers.common["Authorization"]=t.jwtToken,t.postId=t.$route.params.postId,e.next=8,t.$bus.$emit("getCreds",{jwtToken:t.jwtToken,myId:t.myId});case 8:return e.next=10,t.$postHub.postOpened(t.postId);case 10:return e.next=12,t.$postHub.$on("post-commented-on",t.postCommentedOn);case 12:return e.next=14,t.$postHub.$on("comment-deleted",t.commentDeleted);case 14:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getComments();case 2:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$postHub.postClosed(t.postId);case 2:return e.next=4,t.$postHub.$off("post-commented-on",t.postCommentedOn);case 4:return e.next=6,t.$postHub.$off("comment-deleted",t.commentDeleted);case 6:case"end":return e.stop()}}),e)})))()},methods:{getComments:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.get(t.getCommentsForPostUrl.replace("postId",t.postId)).then((function(e){t.commentIds=e.data})).catch((function(t){console.log(t.response)}));case 1:case"end":return e.stop()}}),e)})))()},postCommentedOn:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(t),e.commentIds.unshift(t.id);case 2:case"end":return n.stop()}}),n)})))()},commentDeleted:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(t),e.commentIds.splice(e.commentIds.indexOf(t),1),console.log(e.commentIds);case 3:case"end":return n.stop()}}),n)})))()}}},tt=X,et=(n("3bfe"),Object(u["a"])(tt,Y,Q,!1,null,"b0554166",null)),nt=et.exports;r["default"].use(I["a"]);var rt=[{path:"/login",name:"login",component:$},{path:"/register",name:"register",component:P},{path:"/home",name:"home",component:N},{path:"/update-profile",name:"updateprofile",component:K},{path:"/user/:userId/profile",name:"user",component:J},{path:"/post/:postId",name:"post",component:nt}],ot=new I["a"]({mode:"history",routes:rt}),at=ot,st=n("2b27"),it=n.n(st),ct=n("5f5b"),ut=n("b1e0"),lt=(n("f9e3"),n("2dd8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"feed"}},[t.userId===t.myId?n("post-form",{attrs:{myId:t.myId,jwtToken:t.jwtToken}}):t._e(),t._l(t.postIds,(function(e){return n("post-card",{key:e,attrs:{myId:t.myId,jwtToken:t.jwtToken,postId:e}})}))],2)}),dt=[],mt={name:"Feed",props:["userId","jwtToken","feedType","myId"],data:function(){return{getFeedUrl:"https://localhost:6868/Users/userId/feedType",postIds:[]}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.defaults.headers.common["Authorization"]=t.jwtToken;case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.userId){e.next=3;break}return e.next=3,t.getFeed();case 3:case"end":return e.stop()}}),e)})))()},methods:{getFeed:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getFeedUrl.replace("userId",t.userId).replace("feedType",t.feedType)).then((function(e){t.postIds=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},ft=mt,pt=(n("1151"),Object(u["a"])(ft,lt,dt,!1,null,"053843b0",null)),ht=pt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.notification?n("b-alert",{staticClass:"position-fixed fixed-bottom",attrs:{show:t.dismissNotification,dismissible:""}},[n("notification-card",{attrs:{notification:t.notification,jwtToken:t.jwtToken}})],1):t._e()},vt=[],bt={name:"NotificationAlert",props:["notification","jwtToken","dismissNotification"]},wt=bt,It=(n("38be"),Object(u["a"])(wt,gt,vt,!1,null,"6e2a8188",null)),kt=It.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-media",{on:{click:t.notificationCardOnClick},scopedSlots:t._u([{key:"aside",fn:function(){return[n("b-avatar",{attrs:{variant:"info",src:"https://placekitten.com/300/300",size:"4rem"}})]},proxy:!0}])},[n("div",{staticClass:"noti-body"},[n("p",{staticClass:"mb-0 text"},[t._v(t._s(t.notification.verb))]),n("p",{staticClass:"time"},[t._v(t._s(t.calcTimeTillNow(t.notification.timestamp)))])])])},yt=[],Ct=(n("99af"),{name:"NotificationCard",props:["notification","jwtToken"],data:function(){return{getProfileUrl:"https://localhost:6868/Users/userId/profile",getEntityTypeUrl:"https://localhost:6868/Entity/entityId",from:null}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProfile();case 2:case"end":return e.stop()}}),e)})))()},methods:{getProfile:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getProfileUrl.replace("userId",t.notification.fromId)).then((function(e){t.from=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},notificationCardOnClick:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getEntityTypeUrl.replace("entityId",t.notification.entityId)).then((function(e){t.$router.push("/".concat(e.data,"/").concat(t.notification.entityId))})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()}}}),_t=Ct,$t=(n("9895"),Object(u["a"])(_t,xt,yt,!1,null,"6ff51f3c",null)),jt=$t.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return[t.avatar?n("b-avatar",{attrs:{src:t.avatar,size:"4rem"}}):t._e()]},proxy:!0}])},[n("b-form",{on:{submit:t.onSubmit}},[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:t.form.Text,callback:function(e){t.$set(t.form,"Text",e)},expression:"form.Text"}}),n("div",{attrs:{id:"media-privacy-submit"}},[n("b-form-select",{attrs:{options:t.privacyOptions,required:""},model:{value:t.form.Privacy,callback:function(e){t.$set(t.form,"Privacy",e)},expression:"form.Privacy"}}),n("b-form-file",{attrs:{accept:"image/*",placeholder:"Add an image...",multiple:""},on:{change:t.addMedia},model:{value:t.media,callback:function(e){t.media=e},expression:"media"}}),t.isEditing?n("b-button",{attrs:{variant:"secondary"},on:{click:t.cancelEditing}},[t._v("Cancel")]):t._e(),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1),t.mediaUrls.length>0?n("div",{attrs:{id:"preview"}},[t._l(t.mediaUrls,(function(e){return n("img",{key:e,attrs:{src:e},on:{contextmenu:t.removeImg}})})),t._l(t.mediaUrls,(function(t){return n("video",{key:t,attrs:{controls:""}},[n("source",{attrs:{src:t}})])}))],2):t._e()],1)],1)],1)},Ut=[],Ot={name:"PostForm",props:["myId","jwtToken","post"],data:function(){return{getAvatarUrl:"https://localhost:6868/Users/userId/profile/avatar",avatar:null,postUrl:"https://localhost:6868/Posts/",uploadUrl:"https://localhost:6868/Posts/upload",unuploadUrl:"https://localhost:6868/Posts/unupload",form:{MediaPaths:[]},media:null,mediaUrls:[],privacyOptions:[{value:0,text:"Public"},{value:1,text:"Private"}],isEditing:!1}},created:function(){this.$http.defaults.headers.common["Authorization"]=this.jwtToken},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAvatar();case 2:case"end":return e.stop()}}),e)})))()},methods:{getAvatar:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getAvatarUrl.replace("userId",t.myId)).then((function(e){t.avatar=n("1771")("./".concat(e.data))})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},onSubmit:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.preventDefault(),e.isEditing?e.$http.patch(e.postUrl+e.post.Id,e.form).then((function(t){console.log(t),e.$router.go()})).catch((function(t){console.log(t.response)})):(e.form.AuthorId=e.myId,e.$http.post(e.postUrl,e.form).then((function(t){console.log(t),e.$router.go()})).catch((function(t){console.log(t.response)})));case 2:case"end":return n.stop()}}),n)})))()},cancelEditing:function(){this.$emit("cancelEditing")},addMedia:function(t){var e=this,n=t.target.files[0];this.mediaUrls.push(URL.createObjectURL(n));var r=new FormData;r.append("media",n),this.$http.post(this.uploadUrl,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t.data),e.form.MediaPaths.push(t.data)})).catch((function(t){console.log(t.response)}))},removeImg:function(t){var e=this;console.log(t.target.src);var n=new FormData;n.append(t.target.src.replace("blob:http://localhost:8080/",""),"id"),this.$http.post(this.unuploadUrl,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(n){console.log(n),e.mediaUrls.splice(e.mediaUrls.indexOf(t.target.src),1)})).catch((function(t){console.log(t.response)})),t.preventDefault()}},watch:{post:{deep:!0,immediate:!0,handler:function(){this.post&&(this.isEditing=!0,this.form=this.post)}}}},Tt=Ot,Pt=(n("1c86"),Object(u["a"])(Tt,Rt,Ut,!1,null,"97c7f7c8",null)),Et=Pt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isEditing?n("post-form",{attrs:{post:t.post,myId:t.myId,jwtToken:t.jwtToken},on:{cancelEditing:t.cancelEditing}}):n("b-card",{on:{click:t.postCardOnClick}},[n("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return[t.avatar?n("b-avatar",{attrs:{src:t.avatar,size:"4rem",button:"",id:t.postId},on:{click:t.openUserProfile}}):t._e()]},proxy:!0}],null,!1,4081117573)},[n("b-popover",{attrs:{target:t.postId,triggers:"hover",placement:"top","custom-class":"wide-popover"}},[n("user-card",{attrs:{jwtToken:t.jwtToken,myId:t.myId,userId:t.post.AuthorId,size:t.userCardSize}})],1),n("b-container",{staticClass:"d-inline-flex author-date-opts",attrs:{fluid:""}},[n("div",{staticClass:"author-date"},[n("b",{staticClass:"mt-0 author"},[n("a",{on:{click:t.openUserProfile}},[t._v(t._s(t.name))])]),n("div",[t._v("・")]),n("div",{staticClass:"date",attrs:{title:t.toReadableTime(t.post.Timestamp)}},[t._v(t._s(t.calcTimeTillNow(t.post.Timestamp)))])]),n("div",{staticClass:"opts"},[n("b-dropdown",{attrs:{size:"md",variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!1,2038261878)},[t.myId===t.post.AuthorId?n("div",[n("b-dropdown-item",{on:{click:t.onEditClick}},[n("b-icon",{attrs:{icon:"pen-fill"}}),t._v(" Edit")],1),n("b-dropdown-item",{on:{click:t.onDeleteClick}},[n("b-icon",{attrs:{icon:"trash-fill"}}),t._v(" Delete")],1)],1):n("div",[n("b-dropdown-item",{on:{click:t.onSaveClick}},[n("b-icon",{attrs:{icon:"bookmark-heart-fill"}}),t._v(" Save for later")],1)],1)])],1)]),n("p",{staticClass:"mb-0 text"},[t._v(t._s(t.post.Text))]),t.postMedia.length>0?n("b-carousel",{attrs:{id:"carousel",controls:"",indicators:"","img-width":"370","img-height":"200"}},t._l(t.postMedia,(function(t){return n("b-embed",{key:t,attrs:{type:"iframe",aspect:"16by9",src:t,allowfullscreen:""}})})),1):t._e()],1),n("b-button-group",{staticClass:"d-flex like-cmt-share"},[n("div",{staticClass:"share"},[n("b-button",{attrs:{variant:"outline"}},[n("b-icon",{attrs:{icon:"share",variant:"light"}})],1),n("div",{staticClass:"count"},[t._v(t._s(t.shares))])],1),n("div",{staticClass:"cmt"},[n("b-button",{attrs:{variant:"outline"}},[n("b-icon",{attrs:{icon:"chat",variant:"light"}})],1),n("div",{staticClass:"count"},[t._v(t._s(t.comments))])],1),n("div",{staticClass:"like"},[t.iLiked?n("b-button",{attrs:{variant:"outline"},on:{click:t.unlikePost}},[n("b-icon",{attrs:{icon:"heart-fill",variant:"danger"}})],1):n("b-button",{attrs:{variant:"outline"},on:{click:t.likePost}},[n("b-icon",{attrs:{icon:"heart",variant:"light"}})],1),n("div",{staticClass:"count",class:{liked:t.iLiked}},[t._v(t._s(t.likes))])],1)])],1)},St=[],At=(n("159b"),{name:"PostCard",props:["postId","jwtToken","myId"],data:function(){return{getAvatarNameUrl:"https://localhost:6868/Users/userId/profile/avatarname",avatar:null,name:null,getPostUrl:"https://localhost:6868/Posts/postId",getMediaUrl:"https://localhost:6868/Posts/postId/media",post:{},postMedia:[],getLikesUrl:"https://localhost:6868/Posts/postId/likes",checkLikedUrl:"https://localhost:6868/Posts/postId/likes/userId",likePostUrl:"https://localhost:6868/Posts/postId/likes/userId/like",unlikePostUrl:"https://localhost:6868/Posts/postId/likes/userId/unlike",savePostUrl:"https://localhost:6868/Posts/postId/save/userId",iLiked:!1,whoLiked:[],likes:0,getCommentCountUrl:"https://localhost:6868/Posts/postId/comments/count",comments:0,shares:0,isEditing:!1,userCardSize:"M"}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$postHub.$on("post-react",t.postReacted);case 2:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.$postHub.$off("post-react",this.postReacted)},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPost();case 2:return e.next=4,t.getMedia();case 4:return e.next=6,t.getAvatarName();case 6:return e.next=8,t.haveILiked();case 8:return e.next=10,t.getWhoLiked();case 10:return e.next=12,t.getCommentCount();case 12:case"end":return e.stop()}}),e)})))()},methods:{getAvatarName:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getAvatarNameUrl.replace("userId",t.post.AuthorId)).then((function(e){t.avatar=n("1771")("./".concat(e.data.Avatar)),t.name=e.data.Name})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},getPost:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getPostUrl.replace("postId",t.postId)).then((function(e){t.post=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getMedia:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getMediaUrl.replace("postId",t.postId)).then((function(e){e.data.forEach((function(e,r){var o=n("1771")("./".concat(e));t.postMedia.push(o)}))})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},openUserProfile:function(t){var e=this;this.$router.push({name:"user",params:{userId:this.post.AuthorId,myId:this.myId,jwtToken:this.jwtToken}}).catch((function(t){e.$router.go()})),t.stopPropagation()},getWhoLiked:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getLikesUrl.replace("postId",t.postId)).then((function(e){t.likes=e.data.length})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},haveILiked:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.checkLikedUrl.replace("postId",t.postId).replace("userId",t.myId)).then((function(e){t.iLiked=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},likePost:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.stopPropagation(),n.next=3,e.$http.post(e.likePostUrl.replace("postId",e.postId).replace("userId",e.myId),null).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response)}));case 3:case"end":return n.stop()}}),n)})))()},unlikePost:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.stopPropagation(),n.next=3,e.$http.post(e.unlikePostUrl.replace("postId",e.postId).replace("userId",e.myId),null).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response)}));case 3:case"end":return n.stop()}}),n)})))()},postReacted:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.postId===t.postId){n.next=2;break}return n.abrupt("return");case 2:t.like?(e.likes+=1,e.myId===t.userId&&(e.iLiked=!0)):(e.likes-=1,e.myId===t.userId&&(e.iLiked=!1));case 3:case"end":return n.stop()}}),n)})))()},getCommentCount:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getCommentCountUrl.replace("postId",t.postId)).then((function(e){t.comments=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},postCardOnClick:function(){this.$route.path!=="/post/".concat(this.postId)&&this.$router.push({name:"post",params:{postId:this.postId,myId:this.myId,jwtToken:this.jwtToken}})},onEditClick:function(t){this.isEditing=!0,t.stopPropagation()},cancelEditing:function(){this.isEditing=!1},onDeleteClick:function(t){var e=this;t.stopPropagation(),this.$http.delete(this.getPostUrl.replace("postId",this.postId)).then((function(t){console.log(t),e.$router.go()})).catch((function(t){console.log(t.response)}))},onSaveClick:function(t){t.stopPropagation(),this.$http.post(this.savePostUrl.replace("postId",this.postId).replace("userId",this.myId),null).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)}))}},watch:{post:{immediate:!0,deep:!0,handler:function(){}}}}),Lt=At,Nt=(n("c5f7"),Object(u["a"])(Lt,Mt,St,!1,null,"3f437b0c",null)),Ft=Nt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return[t.avatar?n("b-avatar",{attrs:{src:t.avatar,size:"4rem"}}):t._e()]},proxy:!0}])},[n("b-form",{ref:"form",on:{submit:t.onSubmit}},[n("b-form-group",[n("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:t.form.Text,callback:function(e){t.$set(t.form,"Text",e)},expression:"form.Text"}})],1),n("div",{attrs:{id:"media-submit"}},[n("b-form-file",{attrs:{placeholder:"Add an image...",multiple:""},on:{change:t.addImg},model:{value:t.media,callback:function(e){t.media=e},expression:"media"}}),t.isEditing?n("b-button",{attrs:{variant:"secondary"},on:{click:t.cancelEditing}},[t._v("Cancel")]):t._e(),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1),n("div",{attrs:{id:"preview"}},t._l(t.imgUrls,(function(e){return n("img",{key:e,attrs:{src:e},on:{contextmenu:t.removeImg}})})),0)],1)],1)],1)},zt=[],Ht={name:"CommentForm",props:["postId","myId","jwtToken","comment"],data:function(){return{getAvatarUrl:"https://localhost:6868/Users/userId/profile/avatar",avatar:null,commentUrl:"https://localhost:6868/Comments/",uploadUrl:"https://localhost:6868/Posts/upload",unuploadUrl:"https://localhost:6868/Posts/unupload",form:{MediaPaths:[]},media:null,imgUrls:[],isEditing:!1}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAvatar();case 2:case"end":return e.stop()}}),e)})))()},methods:{getAvatar:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getAvatarUrl.replace("userId",t.myId)).then((function(e){t.avatar=n("1771")("./".concat(e.data))})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},onSubmit:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.preventDefault(),!e.isEditing){n.next=5;break}e.$http.patch(e.commentUrl+e.comment.Id,e.form).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)})),n.next=9;break;case 5:return e.form.AuthorId=e.myId,e.form.PostId=e.postId,n.next=9,e.$http.post(e.commentUrl,JSON.parse(JSON.stringify(e.form))).then((function(t){console.log(t),e.$refs.form.reset()})).catch((function(t){console.log(t.response)}));case 9:case"end":return n.stop()}}),n)})))()},cancelEditing:function(){this.$emit("cancelEditing")},addImg:function(t){var e=this,n=t.target.files[0];this.imgUrls.push(URL.createObjectURL(n));var r=new FormData;r.append("image",n),this.$http.post(this.uploadUrl,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t.data),e.form.MediaPaths.push(t.data)})).catch((function(t){console.log(t.response)}))},removeImg:function(t){this.imgUrls.splice(this.imgUrls.indexOf(t.target.src),1),t.preventDefault()}},watch:{comment:{deep:!0,immediate:!0,handler:function(){this.comment&&(this.isEditing=!0,this.form=this.comment)}}}},Bt=Ht,Jt=(n("e268"),Object(u["a"])(Bt,Dt,zt,!1,null,"19820a3d",null)),Gt=Jt.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isEditing?n("comment-form",{attrs:{comment:t.comment,myId:t.myId,jwtToken:t.jwtToken}}):n("b-card",[n("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return[t.avatar?n("b-avatar",{attrs:{src:t.avatar,size:"4rem",button:"",id:t.commentId},on:{click:t.openUserProfile}}):t._e()]},proxy:!0}],null,!1,2807611086)},[n("b-popover",{attrs:{target:t.commentId,triggers:"hover",placement:"top","custom-class":"wide-popover"}},[n("user-card",{attrs:{jwtToken:t.jwtToken,myId:t.myId,userId:t.comment.AuthorId,size:t.userCardSize}})],1),n("b-container",{staticClass:"d-inline-flex author-date-opts",attrs:{fluid:""}},[n("div",{staticClass:"author-date"},[n("b",{staticClass:"mt-0 author"},[n("a",{attrs:{href:t.userProfileUrl},on:{click:function(e){t.$(this).stopPropagation()}}},[t._v(t._s(t.name))])]),n("div",[t._v("・")]),n("div",{staticClass:"date",attrs:{title:t.toReadableTime(t.comment.Timestamp)}},[t._v(t._s(t.calcTimeTillNow(t.comment.Timestamp)))])]),t.myId===t.comment.AuthorId?n("div",{staticClass:"opts"},[n("b-dropdown",{attrs:{size:"md",variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!1,2038261878)},[n("b-dropdown-item",{on:{click:t.onEditClick}},[n("b-icon",{attrs:{icon:"pen-fill"}}),t._v(" Edit")],1),n("b-dropdown-item",{on:{click:t.onDeleteClick}},[n("b-icon",{attrs:{icon:"trash-fill"}}),t._v(" Delete")],1)],1)],1):t._e()]),n("p",{staticClass:"mb-0 text"},[t._v(" "+t._s(t.comment.Text)+" ")]),t.commentMedia.length>0?n("b-carousel",{attrs:{id:"carousel-comment",interval:4e3,controls:"",indicators:"","img-width":"1024","img-height":"480"}},t._l(t.commentMedia,(function(t){return n("b-carousel-slide",{key:t,attrs:{"img-src":t}})})),1):t._e()],1),n("b-button-group",{staticClass:"d-flex like-cmt-share"},[n("div",{staticClass:"cmt"},[n("b-button",{attrs:{variant:"outline"}},[n("b-icon",{attrs:{icon:"chat",variant:"light"}})],1),n("div",{staticClass:"count"},[t._v(t._s(t.comments))])],1),n("div",{staticClass:"like"},[t.iLiked?n("b-button",{attrs:{variant:"outline"},on:{click:t.unlikeComment}},[n("b-icon",{attrs:{icon:"heart-fill",variant:"danger"}})],1):n("b-button",{attrs:{variant:"outline"},on:{click:t.likeComment}},[n("b-icon",{attrs:{icon:"heart",variant:"light"}})],1),n("div",{staticClass:"count",class:{liked:t.iLiked}},[t._v(t._s(t.likes))])],1)])],1)},Wt=[],Vt=n("2ef0"),Zt=n.n(Vt),Kt={name:"CommentCard",props:["commentId","myId","jwtToken"],data:function(){return{getAvatarNameUrl:"https://localhost:6868/Users/userId/profile/avatarname",avatar:null,name:null,getCommentUrl:"https://localhost:6868/Comments/commentId",getMediaUrl:"https://localhost:6868/Comments/commentId/media",comment:{},commentMedia:[],getLikesUrl:"https://localhost:6868/Comments/commentId/likes",checkLikedUrl:"https://localhost:6868/Comments/commentId/likes/userId",likeCommentUrl:"https://localhost:6868/Comments/commentId/likes/userId/like",unlikeCommentUrl:"https://localhost:6868/Comments/commentId/likes/userId/unlike",iLiked:!1,whoLiked:[],likes:0,getChildCountUrl:"https://localhost:6868/Comments/commentId/comments/count",comments:0,shares:0,isEditing:!1,userCardSize:"M"}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$commentHub.$on("comment-react",t.commentReacted);case 2:return e.next=4,t.$postHub.$on("comment-edited",t.commentEdited);case 4:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.$commentHub.$off("comment-react",this.commentReacted),this.$postHub.$off("comment-edited",this.commentEdited)},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getComment();case 2:return e.next=4,t.getMedia();case 4:return e.next=6,t.getAvatarName();case 6:return e.next=8,t.haveILiked();case 8:return e.next=10,t.getWhoLiked();case 10:return e.next=12,t.getChildCount();case 12:case"end":return e.stop()}}),e)})))()},methods:{getAvatarName:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getAvatarNameUrl.replace("userId",t.comment.AuthorId)).then((function(e){t.avatar=n("1771")("./".concat(e.data.Avatar)),t.name=e.data.Name})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},getComment:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getCommentUrl.replace("commentId",t.commentId)).then((function(e){t.comment=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getMedia:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getMediaUrl.replace("commentId",t.commentId)).then((function(e){e.data.forEach((function(e,r){var o=n("1771")("./".concat(e));t.commentMedia.push(o)}))})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},openUserProfile:function(t){var e=this;this.$router.push({name:"user",params:{userId:this.comment.AuthorId,myId:this.myId,jwtToken:this.jwtToken}}).catch((function(t){e.$router.go()})),t.stopPropagation()},getWhoLiked:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getLikesUrl.replace("commentId",t.commentId)).then((function(e){t.likes=e.data.length})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},haveILiked:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.checkLikedUrl.replace("commentId",t.commentId).replace("userId",t.myId)).then((function(e){t.iLiked=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},likeComment:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.post(e.likeCommentUrl.replace("commentId",e.commentId).replace("userId",e.myId),null).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)}));case 2:t.stopPropagation();case 3:case"end":return n.stop()}}),n)})))()},unlikeComment:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$http.post(e.unlikeCommentUrl.replace("commentId",e.commentId).replace("userId",e.myId),null).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)}));case 2:t.stopPropagation();case 3:case"end":return n.stop()}}),n)})))()},commentReacted:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.commentId===t.commentId){n.next=2;break}return n.abrupt("return");case 2:t.like?(e.likes+=1,e.myId===t.userId&&(e.iLiked=!0)):(e.likes-=1,e.myId===t.userId&&(e.iLiked=!1));case 3:case"end":return n.stop()}}),n)})))()},getChildCount:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getChildCountUrl.replace("commentId",t.commentId)).then((function(e){t.comments=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},onEditClick:function(t){this.isEditing=!0,t.stopPropagation()},commentEdited:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t=Zt.a.mapKeys(t,(function(t,e){return Zt.a.upperFirst(e)})),e.comment.Id===t.Id&&(e.isEditing=!1,e.comment=t);case 2:case"end":return n.stop()}}),n)})))()},onDeleteClick:function(t){t.stopPropagation(),this.$http.delete(this.getCommentUrl.replace("commentId",this.commentId)).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)}))}},watch:{},computed:{userProfileUrl:function(){return"http://localhost:8080/user/".concat(this.comment.AuthorId,"/profile")}}},Yt=Kt,Qt=(n("de43"),Object(u["a"])(Yt,qt,Wt,!1,null,"33bd165c",null)),Xt=Qt.exports,te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return"L"===t.size&&t.profile?r("b-card",{staticClass:"mb-2",attrs:{"img-src":n("1771")("./"+t.profile.Cover),"img-alt":"Image","img-top":"",tag:"article",id:"profile-header"}},[t.userId===t.myId?r("b-button",{attrs:{id:"change-cover"},on:{click:function(e){return t.showAvatarOrCoverChangeModal(e,"cover")}}},[r("b-icon",{attrs:{icon:"camera"}})],1):t._e(),r("div",{attrs:{id:"basic-info"}},[r("b-avatar",{attrs:{id:"avatar",src:n("1771")("./"+t.profile.Avatar),size:"15rem",button:""},on:{click:function(e){return t.showAvatarOrCoverChangeModal(e,"avatar")}}}),r("div",{attrs:{id:"info"}},[r("div",{attrs:{id:"name-follow"}},[r("h1",{attrs:{id:"name"}},[t._v(t._s(t.profile.Name))]),t.myId!==t.userId?r("div",{staticClass:"actions"},[t.iFollowed?r("b-button",{attrs:{variant:"outline-danger"},on:{click:t.unfollow}},[r("b-icon",{attrs:{icon:"person-dash"}})],1):r("b-button",{attrs:{variant:"outline-success"},on:{click:t.follow}},[r("b-icon",{attrs:{icon:"person-plus"}})],1),r("b-button",{attrs:{variant:"outline-info"},on:{click:t.startChat}},[r("b-icon",{attrs:{icon:"chat-text"}})],1)],1):t._e()]),r("div",{attrs:{id:"about-me"}},[r("b-icon",{attrs:{icon:"info-circle"}}),t._v(t._s(t.profile.SelfIntroduction))],1),r("div",{attrs:{id:"address"}},[r("b-icon",{attrs:{icon:"geo-alt"}}),t._v(t._s(t.profile.CurrentLocation))],1),r("div",{attrs:{id:"follow"}},[r("b-icon",{attrs:{icon:"people"}}),r("div",[t._v(t._s(t.followerCount)+" followers"),r("div",[t._v("・")]),t._v(t._s(t.followeeCount)+" following")])],1),r("div",{attrs:{id:"mutual"}},[t._v("Mo foro- sarete imasu")])])],1),t.userId===t.myId?r("b-modal",{attrs:{id:"change-avatar-or-cover-modal",title:"Change "+t.modalType,size:"lg"},on:{ok:t.saveAvatarOrCover}},[r("b-form-file",{attrs:{accept:"image/*",placeholder:"Add an image..."},on:{change:t.chooseImage}}),t.avatarOrCoverUrl?r("div",{attrs:{id:"preview"}},[r("img",{attrs:{src:t.avatarOrCoverUrl,width:"400",height:"400"}})]):t._e()],1):t._e()],1):"M"===t.size&&t.profile?r("b-card",{staticClass:"p-0 border-0 user-card-medium"},[r("b-avatar",{staticClass:"mr-3 center",attrs:{size:"6rem",src:n("1771")("./"+t.profile.Avatar)}}),r("div",{staticClass:"medium-card-right"},[r("div",{staticClass:"name"},[r("span",{staticClass:"mr-auto"},[r("b",[r("a",{attrs:{href:"/user/"+t.profile.UserId+"/profile"}},[t._v(t._s(t.profile.Name))])])])]),r("div",{attrs:{id:"follow"}},[r("b-icon",{attrs:{icon:"people"}}),r("div",[t._v(t._s(t.followerCount)+" followers"),r("div",[t._v("・")]),t._v(t._s(t.followeeCount)+" following")])],1),t.myId!==t.userId?r("div",{staticClass:"actions"},[t.iFollowed?r("b-button",{attrs:{variant:"outline-danger"},on:{click:t.unfollow}},[r("b-icon",{attrs:{icon:"person-dash"}})],1):r("b-button",{attrs:{variant:"outline-success"},on:{click:t.follow}},[r("b-icon",{attrs:{icon:"person-plus"}})],1),r("b-button",{attrs:{variant:"outline-info"},on:{click:t.startChat}},[r("b-icon",{attrs:{icon:"chat-text"}})],1)],1):t._e()])],1):r("b-card",[t.profile?r("div",{staticClass:"user-card-small"},[r("div",{staticClass:"avatar-name"},[r("b-avatar",{staticClass:"mr-3",attrs:{src:n("1771")("./"+t.profile.Avatar)}}),r("span",{staticClass:"mr-auto"},[r("a",{attrs:{href:"/user/"+t.profile.UserId+"/profile"}},[t._v(t._s(t.profile.Name))])])],1),t.myId!==t.userId?r("div",{staticClass:"actions"},[t.iFollowed?r("b-button",{attrs:{variant:"outline-danger"},on:{click:t.unfollow}},[r("b-icon",{attrs:{icon:"person-dash"}})],1):r("b-button",{attrs:{variant:"outline-success"},on:{click:t.follow}},[r("b-icon",{attrs:{icon:"person-plus"}})],1),r("b-button",{attrs:{variant:"outline-info"},on:{click:t.startChat}},[r("b-icon",{attrs:{icon:"chat-text"}})],1)],1):t._e()]):t._e()])},ee=[],ne={name:"UserCard",props:["jwtToken","myId","userId","size"],data:function(){return{getProfileUrl:"https://localhost:6868/Users/userId/profile",profile:null,uploadUrl:"https://localhost:6868/Posts/upload",newAvatarOrCover:null,avatarOrCoverUrl:null,modalType:null,followUrl:"https://localhost:6868/Users/fromId/follow/toId",getFollowerCountUrl:"https://localhost:6868/Users/userId/followers/count",getFolloweeCountUrl:"https://localhost:6868/Users/userId/followees/count",iFollowed:!1,followerCount:null,followeeCount:null,getChatIdUrl:"https://localhost:6868/Chat/fromId/toId"}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.defaults.headers.common["Authorization"]=t.jwtToken;case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProfile();case 2:return e.next=4,t.haveIFollowed();case 4:return e.next=6,t.getFollowerCount();case 6:return e.next=8,t.getFolloweeCount();case 8:case"end":return e.stop()}}),e)})))()},methods:{getProfile:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getProfileUrl.replace("userId",t.userId)).then((function(e){t.profile=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},haveIFollowed:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.followUrl.replace("fromId",t.myId).replace("toId",t.userId)).then((function(e){t.iFollowed=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},getFollowerCount:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getFollowerCountUrl.replace("userId",t.userId)).then((function(e){t.followerCount=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},getFolloweeCount:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getFolloweeCountUrl.replace("userId",t.userId)).then((function(e){t.followeeCount=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},follow:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post(t.followUrl.replace("fromId",t.myId).replace("toId",t.userId),null).then((function(e){console.log(e),t.iFollowed=!0,t.followerCount+=1})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},unfollow:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post(t.followUrl.replace("follow","unfollow").replace("fromId",t.myId).replace("toId",t.userId),null).then((function(e){console.log(e),t.iFollowed=!1,t.followerCount-=1})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},startChat:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,e.next=3,t.$http.get(t.getChatIdUrl.replace("fromId",t.myId).replace("toId",t.userId)).then((function(t){n=t.data})).catch((function(t){console.log(t)}));case 3:t.$bus.$emit("startChat",{myId:t.myId,chatId:n});case 4:case"end":return e.stop()}}),e)})))()},showAvatarOrCoverChangeModal:function(t,e){t.stopPropagation(),this.modalType=e,this.$bvModal.show("change-avatar-or-cover-modal")},chooseImage:function(t){var e=this,n=t.target.files[0];this.avatarOrCoverUrl=URL.createObjectURL(n);var r=new FormData;r.append("media",n),this.$http.post(this.uploadUrl,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.newAvatarOrCover=t.data})).catch((function(t){console.log(t.response)}))},saveAvatarOrCover:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"avatar"===t.modalType?t.profile.Avatar=t.newAvatarOrCover:"cover"===t.modalType&&(t.profile.Cover=t.newAvatarOrCover),e.next=3,t.$http.patch(t.getProfileUrl.replace("userId",t.myId),t.profile).then((function(t){})).catch((function(t){console.log(t.response)}));case 3:case"end":return e.stop()}}),e)})))()}}},re=ne,oe=(n("6757"),Object(u["a"])(re,te,ee,!1,null,"baf46344",null)),ae=oe.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.profile?n("b-container",{attrs:{fluid:"",id:"personal-information"}},[n("b-row",{staticClass:"my-4",attrs:{id:"edit-profile"}},[n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){t.edit=!t.edit}}},[t._v("Edit")])],1),n("b-row",{staticClass:"my-4"},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"Name"}},[t._v("Name")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{class:{edit:!t.edit},attrs:{id:"Name",type:"text",readonly:t.edit},model:{value:t.profile.Name,callback:function(e){t.$set(t.profile,"Name",e)},expression:"profile.Name"}})],1)],1),n("b-row",{staticClass:"my-4"},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"Address"}},[t._v("Address")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{class:{edit:!t.edit},attrs:{id:"Address",type:"text",readonly:t.edit},model:{value:t.profile.CurrentLocation,callback:function(e){t.$set(t.profile,"CurrentLocation",e)},expression:"profile.CurrentLocation"}})],1)],1),n("b-row",{staticClass:"my-4"},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"SelfIntro"}},[t._v("Self introduction")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{class:{edit:!t.edit},attrs:{id:"SelfIntro",type:"text",readonly:t.edit},model:{value:t.profile.SelfIntroduction,callback:function(e){t.$set(t.profile,"SelfIntroduction",e)},expression:"profile.SelfIntroduction"}})],1)],1),n("b-row",{staticClass:"my-4"},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"DateOfBirth"}},[t._v("Date of birth")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"DateOfBirth",readonly:t.edit},model:{value:t.profile.DateOfBirth,callback:function(e){t.$set(t.profile,"DateOfBirth",e)},expression:"profile.DateOfBirth"}})],1)],1),n("b-row",{staticClass:"my-4"},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"Gender"}},[t._v("Gender")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-radio-group",{attrs:{id:"Gender",options:t.options,name:"DateOfBirth",disabled:t.edit},model:{value:t.profile.Gender,callback:function(e){t.$set(t.profile,"Gender",e)},expression:"profile.Gender"}})],1)],1),t._v(" "+t._s(t.profile)+" ")],1):t._e()},ie=[],ce={props:["userId"],data:function(){return{getProfileUrl:"https://localhost:6868/Users/userId/profile",profile:null,options:[{text:"Male",value:0},{text:"Female",value:1},{text:"Prefer not to share",value:2}],edit:!0}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProfile();case 2:case"end":return e.stop()}}),e)})))()},methods:{getProfile:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getProfileUrl.replace("userId",t.userId)).then((function(e){t.profile=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()}}},ue=ce,le=(n("56d0"),Object(u["a"])(ue,se,ie,!1,null,"5631b25e",null)),de=le.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:"",id:"follow-list"}},[t.followers&&t.followees?n("b-card",{attrs:{"no-body":""}},[n("b-tabs",{attrs:{card:"","active-nav-item-class":"text-light bg-dark border-0",justified:""}},[n("b-tab",{attrs:{title:"Followers",active:""}},[t.followers.length>0?n("b-list-group",t._l(t.followers,(function(e){return n("b-list-group-item",{key:e,staticClass:"d-flex align-items-center border border-dark m-0"},[n("user-card",{attrs:{jwtToken:t.jwtToken,myId:t.myId,userId:e,size:t.userCardSize}})],1)})),1):n("div",[t._v("No followers yet.")])],1),n("b-tab",{attrs:{title:"Following"}},[t.followees.length>0?n("b-list-group",t._l(t.followees,(function(e){return n("b-list-group-item",{key:e,staticClass:"d-flex align-items-center border border-dark m-0"},[n("user-card",{attrs:{jwtToken:t.jwtToken,myId:t.myId,userId:e,size:t.userCardSize}})],1)})),1):n("div",[t._v("Not following anyone yet.")])],1)],1)],1):t._e()],1)},fe=[],pe={name:"FollowList",props:["myId","userId","jwtToken"],data:function(){return{getFollowersUrl:"https://localhost:6868/Users/userId/followers",getFolloweesUrl:"https://localhost:6868/Users/userId/followees",followers:null,followees:null,userCardSize:"S"}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getFollowers();case 2:return e.next=4,t.getFollowees();case 4:case"end":return e.stop()}}),e)})))()},methods:{getFollowers:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getFollowersUrl.replace("userId",t.userId)).then((function(e){t.followers=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},getFollowees:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getFolloweesUrl.replace("userId",t.userId)).then((function(e){t.followees=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()}}},he=pe,ge=(n("aa77"),Object(u["a"])(he,me,fe,!1,null,"16655084",null)),ve=ge.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.msg.UserId===t.myId?n("div",{staticClass:"chat__mymessage",class:[t.isSame?"":"chat__first"]},[n("b-dropdown",{attrs:{size:"md",variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}],null,!1,2038261878)},[n("b-dropdown-item",{on:{click:t.onDeleteClick}},[n("b-icon",{attrs:{icon:"trash-fill"}}),t._v(" Delete")],1)],1),n("p",{staticClass:"chat__mymessage__paragraph"},[t._v(t._s(t.msg.Text))])],1):n("div",{staticClass:"chat__yourmessage",class:[t.isSame?"":"chat__first"]},[n("div",{staticClass:"chat__yourmessage__avartar"},[t.avatar?n("b-avatar",{attrs:{src:t.avatar,size:"2rem"}}):t._e()],1),n("div",[t.isSame?t._e():n("p",{staticClass:"chat__yourmessage__user"},[t._v(" "+t._s(t.name)+" ")]),n("div",{staticClass:"chat__yourmessage__p"},[n("p",{staticClass:"chat__yourmessage__paragraph"},[t._v(" "+t._s(t.msg.Text)+" ")])])])])])},we=[],Ie={props:["msg","prev","myId"],data:function(){return{getNameAvatarUrl:"https://localhost:6868/Users/userId/profile/avatarname",avatar:null,name:null,isSame:!1}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isSame=t.isSamePerson(t.msg,t.prev),t.msg.UserId===t.myId){e.next=4;break}return e.next=4,t.getAvatarName();case 4:t.msg.UserId===t.myId||t.msg.Read||t.$bus.$emit("newMsg",!0);case 5:case"end":return e.stop()}}),e)})))()},methods:{getAvatarName:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getNameAvatarUrl.replace("userId",t.msg.UserId)).then((function(e){t.avatar=n("1771")("./".concat(e.data.Avatar)),t.name=e.data.Name})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},isSamePerson:function(t,e){var n;return null!==e&&(null===(n=e[0])||void 0===n?void 0:n.UserId)==(null===t||void 0===t?void 0:t.UserId)},onDeleteClick:function(t){t.stopPropagation()}}},ke=Ie,xe=(n("d421"),Object(u["a"])(ke,be,we,!1,null,"28a9643e",null)),ye=xe.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat__body",attrs:{id:"chat__body"}},t._l(t.msgs,(function(e,r){return n("chat-message",{key:e.Id,attrs:{msg:e,prev:[0==r?null:t.msgs[r-1]],myId:t.myId}})})),1)},_e=[],$e={props:["msgs","myId"]},je=$e,Re=(n("cde1"),Object(u["a"])(je,Ce,_e,!1,null,"05c9fb29",null)),Ue=Re.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form"},[n("b-form-input",{staticClass:"form__input",attrs:{type:"text",placeholder:"Enter message.."},on:{focus:t.readMsg,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)}},model:{value:t.msg.Text,callback:function(e){t.$set(t.msg,"Text","string"===typeof e?e.trim():e)},expression:"msg.Text"}}),n("div",{staticClass:"form__submit",on:{click:t.sendMessage}},[n("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 68 68",fill:"#CCCCCC",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{attrs:{"clip-path":"url(#clip0_26_10)"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M48.0833 19.799C48.619 20.3347 48.806 21.127 48.5665 21.8457L35.8385 60.0294C35.5946 60.7614 34.9513 61.2877 34.1855 61.382C33.4198 61.4763 32.6681 61.1217 32.2539 60.4707L22.593 45.2893L7.41158 35.6285C6.76065 35.2142 6.40604 34.4625 6.50031 33.6968C6.59458 32.931 7.12092 32.2878 7.85287 32.0438L46.0366 19.3159C46.7553 19.0763 47.5476 19.2633 48.0833 19.799ZM26.5903 44.1204L33.3726 54.7782L42.0926 28.6181L26.5903 44.1204ZM39.2642 25.7897L23.7619 41.292L13.1041 34.5097L39.2642 25.7897Z",fill:""}})]),n("defs",[n("clipPath",{attrs:{id:"clip0_26_10"}},[n("rect",{attrs:{width:"48",height:"48",fill:"white",transform:"translate(33.9412) rotate(45)"}})])])])])],1)},Te=[],Pe={data:function(){return{msg:{MediaPaths:[]}}},methods:{readMsg:function(){this.$bus.$emit("newMsg",!1)},sendMessage:function(){this.msg&&(this.$emit("sendMessage",this.msg),this.msg.Text="")}}},Ee=Pe,Me=(n("3958"),Object(u["a"])(Ee,Oe,Te,!1,null,"40cc2cda",null)),Se=Me.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.msgs?n("div",{staticClass:"chat"},[n("div",{staticClass:"chat__header",class:[t.unreadMsg?"new__msg":""]},[n("span",{staticClass:"chat__header__greetings"},[t.avatar?n("b-avatar",{attrs:{src:t.avatar,size:"2rem"}}):t._e(),t._v(" "+t._s(t.chatName)+" "),t.unreadMsg?n("b-icon",{attrs:{variant:"danger",icon:"circle-fill"}}):t._e()],1),n("b-icon",{staticClass:"close-chat-btn",attrs:{icon:"x"},on:{click:t.closeChat}})],1),n("chat-history",{attrs:{msgs:t.msgs,myId:t.myId}}),n("chat-form",{on:{sendMessage:t.sendMessage}})],1):t._e()},Le=[],Ne={props:["myId","jwtToken","chatId"],data:function(){return{getChatNameUrl:"https://localhost:6868/Chat/chatId/name",getOneToOneChatBuddyId:"https://localhost:6868/Chat/chatId/userId/buddy/",getBuddyInfo:"https://localhost:6868/Users/userId/profile/avatarname",getChatHistoryUrl:"https://localhost:6868/Chat/chatId/history",sendMessageUrl:"https://localhost:6868/Chat/messages",markAsReadMessagesUrl:"https://localhost:6868/Chat/chatId/messages/read/userId",chatName:null,avatar:null,msgs:null,unreadMsg:!1}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$http.defaults.headers.common["Authorization"]=t.jwtToken,e.next=3,t.$chatHub.$on("message-received",t.messageReceived);case 3:return e.next=5,t.$bus.$on("newMsg",(function(e){!0===t.unreadMsg&&!1===e&&t.$http.post(t.markAsReadMessagesUrl.replace("chatId",t.chatId).replace("userId",t.myId),null).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),t.unreadMsg=e}));case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$chatHub.chatOpened(t.chatId);case 2:return e.next=4,t.getChat();case 4:return e.next=6,t.getChatHistory();case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.$chatHub.$off("message-received",this.messageReceived)},methods:{getChat:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getChatNameUrl.replace("chatId",t.chatId)).then((function(e){""===e.data?t.$http.get(t.getOneToOneChatBuddyId.replace("chatId",t.chatId).replace("userId",t.myId)).then((function(e){var r=e.data;t.$http.get(t.getBuddyInfo.replace("userId",r)).then((function(e){t.chatName=e.data.Name,t.avatar=n("1771")("./".concat(e.data.Avatar))})).catch((function(t){console.log(t.response)}))})).catch((function(t){console.log(t)})):t.chatName=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getChatHistory:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(t.getChatHistoryUrl.replace("chatId",t.chatId)).then((function(e){t.msgs=e.data})).catch((function(t){console.log(t.response)}));case 2:case"end":return e.stop()}}),e)})))()},sendMessage:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.UserId=e.myId,t.ChatId=e.chatId,n.next=4,e.$http.post(e.sendMessageUrl,t).then((function(t){console.log(t)})).catch((function(t){console.log(t.response)}));case 4:case"end":return n.stop()}}),n)})))()},messageReceived:function(t){t=Zt.a.mapKeys(t,(function(t,e){return Zt.a.upperFirst(e)})),console.log(t),this.msgs.push(t)},closeChat:function(){this.$emit("closeChat",this.chatId)}}},Fe=Ne,De=(n("3feb"),Object(u["a"])(Fe,Ae,Le,!1,null,"661b3df6",null)),ze=De.exports;r["default"].config.productionTip=!0,r["default"].prototype.$bus=new r["default"],r["default"].prototype.$http=f.a,r["default"].use(g),r["default"].use(v),r["default"].use(b),r["default"].use(w),r["default"].use(I["a"]),r["default"].use(it.a),r["default"].use(ct["a"]),r["default"].use(ut["a"]),r["default"].mixin({methods:{calcTimeTillNow:function(t){t=Date.now()-Date.parse(t);var e=Math.floor(t/31556952e3);if(e>0)return e+" years ago";var n=Math.floor(t/2629746e3);if(n>0)return n+" months ago";var r=Math.floor(t/6048e5);if(r>0)return r+" weeks ago";var o=Math.floor(t/864e5);if(o>0)return o+" days ago";var a=Math.floor(t/36e5);if(a>0)return a+" hours ago";var s=Math.floor(t/6e4);if(s>0)return s+" minutes ago";var i=Math.floor(t/1e3);return i+" seconds ago"},toReadableTime:function(t){return t=new Date(t),(t.getDate()<10?"0"+t.getDate():t.getDate())+"/"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}}),r["default"].component("feed",ht),r["default"].component("notification-alert",kt),r["default"].component("notification-card",jt),r["default"].component("post-form",Et),r["default"].component("post-card",Ft),r["default"].component("comment-form",Gt),r["default"].component("comment-card",Xt),r["default"].component("user-card",ae),r["default"].component("personal-information",de),r["default"].component("follow-list",ve),r["default"].component("chat-message",ye),r["default"].component("chat-history",Ue),r["default"].component("chat-form",Se),r["default"].component("chat",ze),new r["default"]({router:at,render:function(t){return t(d)}}).$mount("#app")},"5b5d":function(t,e,n){},6757:function(t,e,n){"use strict";n("e1b9")},"6ee9":function(t,e,n){},"85ec":function(t,e,n){},"8b5b":function(t,e,n){},"909f":function(t,e,n){},9895:function(t,e,n){"use strict";n("8b5b")},"9e4c":function(t,e,n){t.exports=n.p+"img/default-avatar.c47ea82a.jpg"},a33b:function(t,e,n){},a88f:function(t,e,n){},aa77:function(t,e,n){"use strict";n("f65a")},bf2b:function(t,e,n){},c493:function(t,e,n){"use strict";n("909f")},c54b:function(t,e,n){},c5f7:function(t,e,n){"use strict";n("e45b")},cde1:function(t,e,n){"use strict";n("5b5d")},d421:function(t,e,n){"use strict";n("fe85")},d95f:function(t,e,n){"use strict";n("a33b")},daca:function(t,e,n){},de43:function(t,e,n){"use strict";n("fb6c")},e1b9:function(t,e,n){},e268:function(t,e,n){"use strict";n("e3c8")},e3c8:function(t,e,n){},e45b:function(t,e,n){},ee93:function(t,e,n){},f0cd:function(t,e,n){t.exports=n.p+"img/default-cover.232d7c68.png"},f65a:function(t,e,n){},fb6c:function(t,e,n){},fe85:function(t,e,n){}});
//# sourceMappingURL=app.8aee1a33.js.map